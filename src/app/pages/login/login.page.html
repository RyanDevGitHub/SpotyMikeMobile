<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <ion-list class="bg-transparent">
    <!-- Email input -->
    <ion-item>
      <ion-input
        type="email"
        formControlName="email"
        label="Email"
        labelPlacement="floating"
        placeholder="mike@mike.mike"
      ></ion-input>
    </ion-item>
    <div
      *ngIf="form.get('email')?.invalid && (form.get('email')?.dirty || form.get('email')?.touched)"
    >
      <div *ngIf="form.get('email')?.errors?.['required']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>Email required
        </p>
      </div>
      <div *ngIf="form.get('email')?.errors?.['pattern']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>Email format invalid
        </p>
      </div>
    </div>

    <!-- Password input -->
    <ion-item>
      <ion-input
        type="password"
        formControlName="password"
        label="Password"
        labelPlacement="floating"
        placeholder="••••••••"
      ></ion-input>
    </ion-item>
    <div
      *ngIf="form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched)"
    >
      <div *ngIf="form.get('password')?.errors?.['required']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>Password required
        </p>
      </div>
      <div *ngIf="form.get('password')?.errors?.['minlength']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>Password length invalid
        </p>
      </div>
    </div>
  </ion-list>

  <!-- Error message -->
  <div *ngIf="error">
    <p class="error"><ion-icon name="alert-outline"></ion-icon>{{ error }}</p>
  </div>

  <!-- Submit button -->
  <ion-button type="submit" [disabled]="!form.valid || submitForm">
    <ng-container *ngIf="!submitForm; else loading">
      Se Connecter
    </ng-container>
    <ng-template #loading>
      <ion-spinner name="crescent" slot="start"></ion-spinner>
      Connexion...
    </ng-template>
  </ion-button>

  <!-- Google login button -->

  <div class="social-login-bar">
    <button class="social-btn google" (click)="loginWithGoogle()">
      <img
        src="https://img.icons8.com/?size=100&id=17949&format=png&color=000000"
        alt="Google"
      />
    </button>

    <!-- <button class="social-btn facebook" (click)="loginWithGoogle()">
      <img
        src="https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png"
        alt="Facebook"
      />
    </button>

    <button class="social-btn github" (click)="loginWithGoogle()">
      <img
        src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
        alt="Github"
      />
    </button>

    <button class="social-btn x" (click)="loginWithGoogle()">
      <img
        src="https://img.icons8.com/?size=100&id=phOKFKYpe00C&format=png&color=000000"
        alt="X"
      />
    </button> -->
  </div>

  <a href="/auth/register" class="register-link">Pas encore inscrit ?</a>
</form>
