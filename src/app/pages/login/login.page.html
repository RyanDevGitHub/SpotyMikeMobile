<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <ion-list class="bg-transparent">
    <ion-item>
      <ion-input
        type="email"
        formControlName="email"
        name="email"
        label="Email"
        labelPlacement="floating"
        placeholder="mike@mike.mike"
      ></ion-input>
    </ion-item>
    <div
      *ngIf="form.get('email')?.invalid && (form.get('email')?.dirty || form.get('email')?.touched)"
    >
      <div *ngIf="form.get('email')?.errors?.['required']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>
          {{ 'auth.email_require' | translate }}
        </p>
      </div>
      <div *ngIf="form.get('email')?.errors?.['pattern']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>
          {{ 'auth.email_format' | translate }}
        </p>
      </div>
    </div>

    <ion-item>
      <ion-input
        type="password"
        formControlName="password"
        name="password"
        label="Password"
        labelPlacement="floating"
        placeholder="••••••••••••••"
      ></ion-input>
    </ion-item>
    <div
      *ngIf="form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched)"
    >
      <div *ngIf="form.get('password')?.errors?.['required']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>
          Password required
        </p>
      </div>
      <div *ngIf="form.get('password')?.errors?.['minlength']">
        <p class="error">
          <ion-icon name="alert-outline"></ion-icon>
          Password length is invalid
        </p>
      </div>
    </div>
  </ion-list>

  <!-- Message d'erreur mauvais identifiants -->
  <div *ngIf="error">
    <p class="error">
      <ion-icon name="alert-outline"></ion-icon>
      {{ error }}
    </p>
  </div>

  <br />

  <!-- Bouton avec spinner -->
  <ion-button type="submit" [disabled]="!form.valid || submitForm">
    <ng-container *ngIf="!submitForm; else loading">
      Se Connecter
    </ng-container>
    <ng-template #loading>
      <ion-spinner name="crescent" slot="start"></ion-spinner>
      Connexion...
    </ng-template>
  </ion-button>

  <a href="/auth/register">Pas encore inscrit ?</a>
</form>
